geom_line(data = df, aes(x = Date, y = Loess100, color = "Loess span = 1.0"), linewidth = 1.1) +
# LOESS span = 0.5 (50%)
geom_line(data = df, aes(x = Date, y = Loess50, color = "Loess span = 0.5"), linewidth = 1.1) +
# Linear regression (full data)
geom_line(data = df, aes(x = Date, y = Lin, color = "Linear (full)"), linewidth = 1.1) +
# Linear regression (yearly)
geom_line(data = df_year, aes(x = Date, y = trend_YearLin, color = "Linear (yearly)"), linewidth = 1.1)
df_year
df_year |> str()
trend_Lin
ggplot() +
# Original data in very light gray
# geom_line(data = df, aes(x = Date, y = Value), color = "gray80", linewidth = 0.6) +
#
# # LOESS span = 1 (100%)
# geom_line(data = df, aes(x = Date, y = Loess100, color = "Loess span = 1.0"), linewidth = 1.1) +
#
# # LOESS span = 0.5 (50%)
# geom_line(data = df, aes(x = Date, y = Loess50, color = "Loess span = 0.5"), linewidth = 1.1) +
#
# # Linear regression (full data)
# geom_line(data = df, aes(x = Date, y = Lin, color = "Linear (full)"), linewidth = 1.1) +
# Linear regression (yearly)
geom_line(data = df_year, aes(x = Date, y = trend_YearLin, color = "Linear (yearly)"), linewidth = 1.1)
View(df)
ggplot() +
# Original data in very light gray
geom_line(data = df, aes(x = Date, y = Value), color = "gray80", linewidth = 0.6) +
# LOESS span = 1 (100%)
geom_line(data = df, aes(x = Date, y = Loess100, color = "Loess span = 1.0"), linewidth = 1.1) +
# LOESS span = 0.5 (50%)
geom_line(data = df, aes(x = Date, y = Loess50, color = "Loess span = 0.5"), linewidth = 1.1) +
# Linear regression (full data)
geom_line(data = df, aes(x = Date, y = Lin, color = "Linear (full)"), linewidth = 1.1)
ggplot() +
# Original data in very light gray
geom_line(data = df, aes(x = Date, y = Value), color = "gray80", linewidth = 0.6) +
# LOESS span = 1 (100%)
geom_line(data = df, aes(x = Date, y = Loess100, color = "Loess span = 1.0"), linewidth = 1.1) +
# LOESS span = 0.5 (50%)
geom_line(data = df, aes(x = Date, y = Loess50, color = "Loess span = 0.5"), linewidth = 1.1) +
# Linear regression (full data)
geom_line(data = df, aes(x = Date, y = Lin, color = "Linear (full)"), linewidth = 1.1) +
# Linear regression (yearly)
geom_line(data = df_year, aes(x = Date, y = trend_YearLin, color = "Linear (yearly)"), linewidth = 1.1)
index(xts_Component)
# Convert xts data to data frame for ggplot
df <- data.frame(
Date = index(xts_Component) |> as_date(),
Value = coredata(xts_Component) |> as.numeric(),
Loess100 = trend_Loess100,
Loess50  = trend_Loess50,
Lin      = trend_Lin
)
# Add yearly data (middle of year)
df_year <- data.frame(
Date = index(xts_Year) |> as_date(),
YearLin = trend_YearLin
)
# Plot with ggplot
ggplot() +
# Original data in very light gray
geom_line(data = df, aes(x = Date, y = Value), color = "gray80", linewidth = 0.6) +
# LOESS span = 1 (100%)
geom_line(data = df, aes(x = Date, y = Loess100, color = "Loess span = 1.0"), linewidth = 1.1) +
# LOESS span = 0.5 (50%)
geom_line(data = df, aes(x = Date, y = Loess50, color = "Loess span = 0.5"), linewidth = 1.1) +
# Linear regression (full data)
geom_line(data = df, aes(x = Date, y = Lin, color = "Linear (full)"), linewidth = 1.1) +
# Linear regression (yearly)
geom_line(data = df_year, aes(x = Date, y = trend_YearLin, color = "Linear (yearly)"), linewidth = 1.1) +
# Colors and theme
scale_color_manual(
name = "Trend Type",
values = c(
"Loess span = 1.0" = "#1b9e77",
"Loess span = 0.5" = "#7570b3",
"Linear (full)" = "#d95f02",
"Linear (yearly)" = "#e7298a"
)
) +
labs(x = NULL, y = "Value", title = "Trend Comparison (LOESS and Linear)") +
theme_minimal(base_size = 13) +
theme(
legend.position = "top",
legend.title = element_blank(),
plot.title = element_text(face = "bold")
)
# Plot with ggplot
ggplot() +
# LOESS span = 1 (100%)
geom_line(data = df, aes(x = Date, y = Loess100, color = "Loess span = 1.0"), linewidth = 1.1) +
# LOESS span = 0.5 (50%)
geom_line(data = df, aes(x = Date, y = Loess50, color = "Loess span = 0.5"), linewidth = 1.1) +
# Linear regression (full data)
geom_line(data = df, aes(x = Date, y = Lin, color = "Linear (full)"), linewidth = 1.1) +
# Linear regression (yearly)
geom_line(data = df_year, aes(x = Date, y = trend_YearLin, color = "Linear (yearly)"), linewidth = 1.1) +
# Colors and theme
scale_color_manual(
name = "Trend Type",
values = c(
"Loess span = 1.0" = "#1b9e77",
"Loess span = 0.5" = "#7570b3",
"Linear (full)" = "#d95f02",
"Linear (yearly)" = "#e7298a"
)
) +
labs(x = NULL, y = "Value", title = "Trend Comparison (LOESS and Linear)") +
theme_minimal(base_size = 13) +
theme(
legend.position = "top",
legend.title = element_blank(),
plot.title = element_text(face = "bold")
)
# Add yearly data (middle of year)
df_year <- data.frame(
Date = index(xts_Year) |> as_date(),
Value = coredata(xts_Year) |> as.numeric(),
YearLin = trend_YearLin
)
# Plot with ggplot
ggplot() +
# Original data in very light gray
geom_line(data = df_year, aes(x = Date, y = Value), color = "gray80", linewidth = 0.6) +
# LOESS span = 1 (100%)
geom_line(data = df, aes(x = Date, y = Loess100, color = "Loess span = 1.0"), linewidth = 1.1) +
# LOESS span = 0.5 (50%)
geom_line(data = df, aes(x = Date, y = Loess50, color = "Loess span = 0.5"), linewidth = 1.1) +
# Linear regression (full data)
geom_line(data = df, aes(x = Date, y = Lin, color = "Linear (full)"), linewidth = 1.1) +
# Linear regression (yearly)
geom_line(data = df_year, aes(x = Date, y = trend_YearLin, color = "Linear (yearly)"), linewidth = 1.1) +
# Colors and theme
scale_color_manual(
name = "Trend Type",
values = c(
"Loess span = 1.0" = "#1b9e77",
"Loess span = 0.5" = "#7570b3",
"Linear (full)" = "#d95f02",
"Linear (yearly)" = "#e7298a"
)
) +
labs(x = NULL, y = "Value", title = "Trend Comparison (LOESS and Linear)") +
theme_minimal(base_size = 13) +
theme(
legend.position = "top",
legend.title = element_blank(),
plot.title = element_text(face = "bold")
)
# Plot with ggplot
ggplot() +
geom_line(data = df_year, aes(x = Date, y = Value, color = "Yearly mena"), linewidth = 0.6) +
geom_line(data = df, aes(x = Date, y = Loess100, color = "Loess span = 1.0"), linewidth = 1) +
geom_line(data = df, aes(x = Date, y = Loess50, color = "Loess span = 0.5"), linewidth = 1) +
geom_line(data = df, aes(x = Date, y = Lin, color = "Linear (full)"), linewidth = 1) +
geom_line(data = df_year, aes(x = Date, y = trend_YearLin, color = "Linear (yearly)"), linewidth = 1) +
scale_color_manual(
name = "Trend Type",
values = c(
"Yearly mena" = "gray80"
"Loess span = 1.0" = "#1b9e77",
# Plot with ggplot
ggplot() +
geom_line(data = df_year, aes(x = Date, y = Value, color = "Yearly mena"), linewidth = 0.6) +
geom_line(data = df, aes(x = Date, y = Loess100, color = "Loess span = 1.0"), linewidth = 1) +
geom_line(data = df, aes(x = Date, y = Loess50, color = "Loess span = 0.5"), linewidth = 1) +
geom_line(data = df, aes(x = Date, y = Lin, color = "Linear (full)"), linewidth = 1) +
geom_line(data = df_year, aes(x = Date, y = trend_YearLin, color = "Linear (yearly)"), linewidth = 1) +
scale_color_manual(
name = "Trend Type",
values = c(
"Yearly mena" = "gray80",
"Loess span = 1.0" = "#1b9e77",
"Loess span = 0.5" = "#7570b3",
"Linear (full)" = "#d95f02",
"Linear (yearly)" = "#e7298a"
)
) +
labs(x = NULL, y = "Temperature (°C)", title = "Trend Comparison (LOESS and Linear)") +
theme(
legend.position = "top",
legend.title = element_blank()
)
# Convert xts data to data frame for ggplot
df_TS_Trend_Daily <- data.frame(
Date = index(xts_Component) |> as_date(),
Loess100 = trend_Loess100,
Loess50  = trend_Loess50,
Lin      = trend_Lin
)
# Add yearly data (middle of year)
df_TS_Trend_Yearly <- data.frame(
Date = index(xts_Year) |> as_date(),
Value = coredata(xts_Year) |> as.numeric(),
YearLin = trend_YearLin
)
# Plot with ggplot
ggplot() +
geom_line(data = df_TS_Trend_Yearly, aes(x = Date, y = Value, color = "Yearly mena"), linewidth = 0.6) +
geom_line(data = df_TS_Trend_Daily, aes(x = Date, y = Loess100, color = "Loess span = 1.0"), linewidth = 1) +
geom_line(data = df_TS_Trend_Daily, aes(x = Date, y = Loess50, color = "Loess span = 0.5"), linewidth = 1) +
geom_line(data = df_TS_Trend_Daily, aes(x = Date, y = Lin, color = "Linear (full)"), linewidth = 1) +
geom_line(data = df_TS_Trend_Yearly, aes(x = Date, y = trend_YearLin, color = "Linear (yearly)"), linewidth = 1) +
scale_color_manual(
name = "Trend Type",
values = c(
"Yearly mena" = "gray80",
"Loess span = 1.0" = "#1b9e77",
"Loess span = 0.5" = "#7570b3",
"Linear (full)" = "#d95f02",
"Linear (yearly)" = "#e7298a"
)
) +
labs(x = NULL, y = "Temperature (°C)", title = "Trend Comparison (LOESS and Linear)") +
theme(
legend.position = "top",
legend.title = element_blank()
)
# --- 2. Detrend and estimate seasonal component by day-of-year
xts_Detrend <- coredata(xts_Component) - trend_YearLin
# --- 2. Detrend and estimate seasonal component by day-of-year
xts_Detrend <- coredata(xts_Component) - trend_Loess100
season_Day_Index <- as.numeric(format(index(xts_Component), "%j"))  # 1–365 or 366
season_Day <- ave(detrended, season_Day_Index, FUN = mean, na.rm = TRUE)
season_Month_Index <- as.numeric(format(index(xts_Component), "%m"))  # 1–365 or 366
season_Month <- ave(detrended, season_Month_Index, FUN = mean, na.rm = TRUE)
season_Week_Index <- as.numeric(format(index(xts_Component), "%V"))  # 1–365 or 366
season_Week <- ave(detrended, season_Week_Index, FUN = mean, na.rm = TRUE)
xts_Component <- as.xts(df_Temperatur)
xts_Component <- xts_Component[as_date(as_date("2005-01-01"):as_date("2024-12-31"))]
df_TS_Component <- xts_Component |> as.data.frame()
write.csv(df_TS_Component, "data_share/df_TS_Component.csv", quote = FALSE)
xts_Component <- as.xts(df_TS_Component)
# --- 1. Trend (loess smoothing)
# LOESS fit
trend_Fit100 <- stats::loess(coredata(xts_Component) ~ as.numeric(index(xts_Component)), span = 1)
trend_Loess100 <- trend_Fit100$fitted
trend_Fit50 <- stats::loess(coredata(xts_Component) ~ as.numeric(index(xts_Component)), span = .5)
trend_Loess50 <- trend_Fit50$fitted
# Linear regression fit
trend_LM <- stats::lm(coredata(xts_Component) ~ as.numeric(index(xts_Component)))
trend_Lin <- trend_LM$fitted.values
# Compute yearly means
xts_Year <- apply.yearly(xts_Component, colMeans)
index(xts_Year) <- as.Date(paste0(format(index(xts_Year), "%Y"), "-07-01"))
trend_YearLM <- stats::lm(coredata(xts_Year) ~ as.numeric(index(xts_Year)))
trend_YearLin <- trend_YearLM$fitted.values
## Plot ----------
# Convert xts data to data frame for ggplot
df_TS_Trend_Daily <- data.frame(
Date = index(xts_Component) |> as_date(),
Loess100 = trend_Loess100,
Loess50  = trend_Loess50,
Lin      = trend_Lin
)
# Add yearly data (middle of year)
df_TS_Trend_Yearly <- data.frame(
Date = index(xts_Year) |> as_date(),
Value = coredata(xts_Year) |> as.numeric(),
YearLin = trend_YearLin
)
# Plot with ggplot
ggplot() +
geom_line(data = df_TS_Trend_Yearly, aes(x = Date, y = Value, color = "Yearly mena"), linewidth = 0.6) +
geom_line(data = df_TS_Trend_Daily, aes(x = Date, y = Loess100, color = "Loess span = 1.0"), linewidth = 1) +
geom_line(data = df_TS_Trend_Daily, aes(x = Date, y = Loess50, color = "Loess span = 0.5"), linewidth = 1) +
geom_line(data = df_TS_Trend_Daily, aes(x = Date, y = Lin, color = "Linear (full)"), linewidth = 1) +
geom_line(data = df_TS_Trend_Yearly, aes(x = Date, y = trend_YearLin, color = "Linear (yearly)"), linewidth = 1) +
scale_color_manual(
name = "Trend Type",
values = c(
"Yearly mena" = "gray80",
"Loess span = 1.0" = "#1b9e77",
"Loess span = 0.5" = "#7570b3",
"Linear (full)" = "#d95f02",
"Linear (yearly)" = "#e7298a"
)
) +
labs(x = NULL, y = "Temperature (°C)", title = "Trend Comparison (LOESS and Linear)") +
theme(
legend.position = "top",
legend.title = element_blank()
)
season_Week
# Detrend the component
xts_Detrend <- coredata(xts_Component) - trend_Loess100
# Extract time indices
time_index <- index(xts_Component)
season_Day_Index <- as.numeric(format(time_index, "%j"))      # 1–365 (day of year)
season_Week_Index <- as.numeric(format(time_index, "%V"))     # 1–53 (ISO week)
season_Month_Index <- as.numeric(format(time_index, "%m"))    # 1–12 (month)
# Compute mean seasonal cycles
season_Day <- ave(xts_Detrend, season_Day_Index, FUN = mean, na.rm = TRUE)
season_Week <- ave(xts_Detrend, season_Week_Index, FUN = mean, na.rm = TRUE)
season_Month <- ave(xts_Detrend, season_Month_Index, FUN = mean, na.rm = TRUE)
# Combine into one data frame
df_season <- data.frame(
Date = time_index,
Day = season_Day,
Week = season_Week,
Month = season_Month
)
# Limit to 2023–2024
df_season <- df_season %>%
filter(Date >= as.Date("2023-01-01"), Date <= as.Date("2024-12-31"))
# Reshape for ggplot
df_long <- df_season %>%
select(Date, Day, Week, Month) %>%
pivot_longer(cols = c(Day, Week, Month), names_to = "Seasonality", values_to = "Value")
View(df_season)
xts_Detrend
xts_Detrend |> str()
str(trend_Loess100)
# Detrend the component
xts_Detrend <- xts_Component - trend_Loess100
str(xts_Detrend)
# Detrend the component
xts_Detrend <- xts_Component - trend_Loess100
# Compute mean seasonal cycles
season_Day <- ave(xts_Detrend, season_Day_Index, FUN = mean, na.rm = TRUE)
season_Week <- ave(xts_Detrend, season_Week_Index, FUN = mean, na.rm = TRUE)
season_Month <- ave(xts_Detrend, season_Month_Index, FUN = mean, na.rm = TRUE)
# Combine into one data frame
df_season <- data.frame(
Date = time_index,
Day = season_Day,
Week = season_Week,
Month = season_Month
)
# Detrend the component
xts_Detrend <- as.numeric(xts_Component - trend_Loess100)
# Extract time indices
time_index <- index(xts_Component)
season_Day_Index <- as.numeric(format(time_index, "%j"))      # 1–365 (day of year)
season_Week_Index <- as.numeric(format(time_index, "%V"))     # 1–53 (ISO week)
season_Month_Index <- as.numeric(format(time_index, "%m"))    # 1–12 (month)
# Compute mean seasonal cycles
season_Day <- ave(xts_Detrend, season_Day_Index, FUN = mean, na.rm = TRUE)
season_Week <- ave(xts_Detrend, season_Week_Index, FUN = mean, na.rm = TRUE)
season_Month <- ave(xts_Detrend, season_Month_Index, FUN = mean, na.rm = TRUE)
# Combine into one data frame
df_season <- data.frame(
Date = time_index,
Day = season_Day,
Week = season_Week,
Month = season_Month
)
# Limit to 2023–2024
df_season <- df_season %>%
filter(Date >= as.Date("2023-01-01"), Date <= as.Date("2024-12-31"))
# Reshape for ggplot
df_long <- df_season %>%
select(Date, Day, Week, Month) %>%
pivot_longer(cols = c(Day, Week, Month), names_to = "Seasonality", values_to = "Value")
# Plot
ggplot(df_long, aes(x = Date, y = Value, color = Seasonality)) +
geom_line(size = 0.7) +
labs(
title = "Seasonality of xts_Detrend Component (2023–2024)",
x = "Date",
y = "xts_Detrend Value",
color = "Seasonality"
) +
theme_minimal(base_size = 14)
# Plot
ggplot(df_long, aes(x = Date, y = Value, color = Seasonality)) +
geom_line(size = 0.7) +
labs(
title = "Seasonality Component (2023–2024)",
x = "Date",
y = "Temperature (°C)",
color = ""
) +
theme(
legend.position = "top",
legend.title = element_blank()
)
# Plot
ggplot(df_long, aes(x = Date, y = Value, color = Seasonality)) +
geom_line() +
labs(
title = "Seasonality Component (2023–2024)",
x = "Date",
y = "Temperature (°C)",
color = ""
) +
theme(
legend.position = "top",
legend.title = element_blank()
)
# Combine into one data frame
df_Season <- data.frame(
Date = time_index,
Day = season_Day,
Week = season_Week,
Month = season_Month
) |> filter(Date >= as.Date("2023-01-01"), Date <= as.Date("2024-12-31"))
xts_Season <- as.xts(df_Season)
xts_Season_Roll <- rollmean(xts_Season)
xts_Season_Roll <- rollmean(xts_Season, 7)
View(xts_Season_Roll)
df_Season_Roll <- as.data.frame(xts_Season_Roll)
View(df_Season_Roll)
df_Season_Roll$Date <- index(xts_Season_Roll)
df_Season_Roll_Long <- df_Season_Roll |>
select(Date, Day, Week, Month) |>
pivot_longer(cols = c(Day, Week, Month), names_to = "Season_Rollality", values_to = "Value")
# Plot
ggplot(df_Season_Roll_Long, aes(x = Date, y = Value, color = Season_Rollality)) +
geom_line() +
labs(
title = "Season_Rollality Component (2023–2024)",
x = "Date",
y = "Temperature (°C)",
color = ""
) +
theme(
legend.position = "top",
legend.title = element_blank()
)
num_Detredn <- as.numeric(xts_Detrend)
# --- 2. Detrend and estimate seasonal component by day-of-year
# Detrend the component
xts_Detrend <- xts_Component - trend_Loess100
xts_Detrend_Month <- apply.monthly(xts_Detrend)
xts_Detrend_Month <- apply.monthly(xts_Detrend, mean)
xts_Detrend_Month <- apply.monthly(xts_Detrend, colMeans)
xts_Detrend_Week <- apply.weekly(xts_Detrend, colMeans)
# 1. Aggregate to monthly and weekly means
xts_Detrend_Month <- apply.monthly(xts_Detrend, colMeans, na.rm = TRUE)
xts_Detrend_Week  <- apply.weekly(xts_Detrend, colMeans, na.rm = TRUE)
# 2. Set index to the middle of each month or week
index(xts_Detrend_Month) <- as.Date(format(index(xts_Detrend_Month), "%Y-%m-15"))
# For weeks, approximate mid-week (e.g., Wednesday)
index(xts_Detrend_Week) <- index(xts_Detrend_Week) - 3  # shift to mid-week (7/2 ≈ 3 days)
# 3. Compute seasonality using month/week means
month_index <- as.numeric(format(index(xts_Detrend_Month), "%m"))
week_index  <- as.numeric(format(index(xts_Detrend_Week), "%V"))
season_Month <- ave(as.numeric(coredata(xts_Detrend_Month)), month_index, FUN = mean, na.rm = TRUE)
season_Week  <- ave(as.numeric(coredata(xts_Detrend_Week)), week_index, FUN = mean, na.rm = TRUE)
# 4. Combine into data frame for plotting
df_month <- data.frame(Date = index(xts_Detrend_Month), Seasonality = season_Month, Type = "Monthly")
df_week  <- data.frame(Date = index(xts_Detrend_Week),  Seasonality = season_Week,  Type = "Weekly")
df_all <- rbind(df_month, df_week)
# 5. Limit to 2023–2024
df_all <- df_all %>%
filter(Date >= as.Date("2023-01-01"), Date <= as.Date("2024-12-31"))
# 6. Plot
ggplot(df_all, aes(x = Date, y = Seasonality, color = Type)) +
geom_line(size = 0.8) +
labs(
title = "Weekly and Monthly Seasonality of Detrended Component (2023–2024)",
x = "Date",
y = "Seasonal Mean",
color = "Aggregation"
) +
theme_minimal(base_size = 14)
# 4. Combine into data frame for plotting
df_month <- data.frame(Date = index(xts_Detrend_Month), Seasonality = season_Month, Type = "Monthly")
View(df_month)
# 4. Combine into data frame for plotting
df_PeriodMean <- rbind(data.frame(Date = index(xts_Detrend_Month), Seasonality = season_Month, Type = "Monthly"),
data.frame(Date = index(xts_Detrend_Week),  Seasonality = season_Week,  Type = "Weekly")) |>
filter(Date >= as.Date("2023-01-01"), Date <= as.Date("2024-12-31"))
# 6. Plot
ggplot(df_PeriodMean, aes(x = Date, y = Seasonality, color = Type)) +
geom_line() +
labs(
title = "Weekly and Monthly Seasonality (2023–2024)",
x = "Date",
y = "Temperature (°C)",
color = ""
) +
theme(
legend.position = "top",
legend.title = element_blank()
)
season_MonthMean <- ave(as.numeric(coredata(xts_Detrend_Month)), idx_Month_Middle, FUN = mean, na.rm = TRUE)
# 1. Aggregate to monthly and weekly means
xts_Detrend_Month <- apply.monthly(xts_Detrend, colMeans, na.rm = TRUE)
xts_Detrend_Week  <- apply.weekly(xts_Detrend, colMeans, na.rm = TRUE)
# 2. Set index to the middle of each month or week
index(xts_Detrend_Month) <- as.Date(format(index(xts_Detrend_Month), "%Y-%m-15"))
# For weeks, approximate mid-week (e.g., Wednesday)
index(xts_Detrend_Week) <- index(xts_Detrend_Week) - 3  # shift to mid-week (7/2 ≈ 3 days)
# 3. Compute seasonality using month/week means
idx_Month_Middle <- as.numeric(format(index(xts_Detrend_Month), "%m"))
idx_Week_Middle  <- as.numeric(format(index(xts_Detrend_Week), "%V"))
season_MonthMean <- ave(as.numeric(coredata(xts_Detrend_Month)), idx_Month_Middle, FUN = mean, na.rm = TRUE)
season_WeekMean  <- ave(as.numeric(coredata(xts_Detrend_Week)), idx_Week_Middle, FUN = mean, na.rm = TRUE)
# 4. Combine into data frame for plotting
df_PeriodMean <- rbind(data.frame(Date = index(xts_Detrend_Month), Seasonality = season_MonthMean, Type = "Monthly"),
data.frame(Date = index(xts_Detrend_Week),  Seasonality = season_WeekMean,  Type = "Weekly")) |>
filter(Date >= as.Date("2023-01-01"), Date <= as.Date("2024-12-31"))
season_MonthMean
install.packages("stlplus")
library(stlplus)
# x: numeric vector, date: corresponding Date vector
stl_fit <- stlplus(x = as.numeric(coredata(xts_Component)),
t = index(xts_Component),
n.p = 365,        # seasonal period (days per year)
s.window = "periodic")
plot(stl_fit)
stl_fit
plot(stl_fit) +
labs(x = "date")
install.packages("reticulate ")
install.packages("reticulate")
library(reticulate)
conda_install(envname = "r-reticulate", packages = "scipy")
py_install("scipy")
